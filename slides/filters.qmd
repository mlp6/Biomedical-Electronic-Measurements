---
title: "Filters"
date: "2025-10-06"
format:
  live-html: 
    output-file: filters-notes.html
  live-revealjs: 
    output-file: filters-slides.html
---

## Overview

The **frequency response** of a circuit is a measure of the variation of a
load-related voltage/current signal as a function of the frequency content of
the source signal.

::: {.callout-note title="Goal"}
Our goal is to evaluate the modulation of an input (voltage) signal by a circuit with
frequency-dependent behavior leading to a frequency-dependent output (voltage) signal.
:::

## Circuit Block Diagram

![](images/source-filter-load.png){fig-align="center"}

Generalized circuit block diagram with a source (input signal), a filter (circuit with frequency-dependent behavior), and a load (output signal).

## Transfer Function

- A **transfer function** is a mathematical representation of the relationship
between the input and output of a system as a function of frequency.  

- It describes how a filter modifies the amplitude and phase of the input signal
to produce the output signal.

$$
\bar{H}(j\omega) = \frac{\bar{V}_{out}(j\omega)}{\bar{V}_{in}(j\omega)}
$$

- Complex quantity

- Dimensionless

- Function of frequency ($\omega$)

## Interpretting a Transfer Function

- $\bar{V}_{L}(j\omega)$ will be an **amplitude-modulated** and **phase-modulated** version of $\bar{V}_{S}(j\omega)$.

$$
\begin{gather}
V_{L} e^{j\phi_L} = |H|e^{j\angle H} V_{S} e^{j\phi_S} = |H| V_{S} e^{j(\phi_S + \angle H)} \\
V_{L} = |H| V_{S} \\
\phi_L = \angle H + \phi_S
\end{gather}
$$

### Example: FM Radio

- Input/Source: all the stations broadcast span a wide range of frequencies in the FM band (88-108 MHz).

- Desired Output/Load: a single station (e.g., 101.1 MHz).

- Draw:

  - Input signal: multiple frequencies

  - Output signal: single frequency

  - Transfer function: band-pass filter centered at 101.1 MHz

### Example: Audio Equalizer

- Input/Source: music signal with a wide range of frequencies (bass, midrange, treble).

- Desired Output/Load: enhanced bass and treble frequencies.

- Draw:

  - Input signal: full spectrum

  - Output signal: enhanced bass and treble

  - Transfer functions: low-pass and high-pass filters

## How to Design a Low-Pass Filter (LPF)

![](images/lpf.png){fig-align="center"}

Let's inspect the frequency response (transfer function) of this circuit...

$$
V_o = V_i \frac{\frac{1}{j\omega C}}{R + \frac{1}{j \omega C}} \\
$$

How did I get this expression?

### Solve for Transfer Function

$$
\frac{V_o}{V_i} = \frac{1}{1 + j\omega RC} \\
$$

Convert to polar form to get magnitude and phase:

$$
\begin{gather}
|\bar{H}(j\omega)| = \frac{1}{\sqrt{1 + (\omega RC)^2}} \\
\angle \bar{H}(j\omega) = -\tan^{-1}(\omega RC) \\
\end{gather}
$$

### Does this make sense?

Let's test some different frequencies to see what the transfer function tells us...

- At $\omega = 0$ (DC):

$$
\begin{gather}
|\bar{H}(j0)| = 1 \\
\angle \bar{H}(j0) = 0^\circ \\
\end{gather}
$$

That means that at DC, the output voltage is equal to the input voltage (no attenuation, no phase shift): $V_o = V_i$.  The capacitor is effectively an open circuit at DC.

![](images/lpf-dc.png){fig-align="center"}

---

- At $\omega = \infty$:

$$
\begin{gather}
|\bar{H}(j\infty)| = 0 \\
\angle \bar{H}(j\infty) = -90^\circ \\
\end{gather}
$$

That means that at high frequencies, the output voltage is zero (completely attenuated) and the phase shift is -90 degrees: $V_o = 0$. The capacitor is effectively a short circuit at high frequencies.

![](images/lpf-high-freq.png){fig-align="center"}

### Complete Transfer Function

![](images/rc_lpf_xfer_func.png){fig-align="center"}

- $\omega_o$ is a characterisitic "cutoff" frequency that conveys information about the frequency response of the circuit.

    - $V_o$ is at **half power** of $V_i$ ($|H| = 1/\sqrt{2}$), which is
    attenuated by -3 dB ($20 \log_{10}(1/\sqrt{2}) \approx -3$ dB).

    - The phase shift is -45 degrees (half of the total -90 degree shift).

- Less-attenuated frequencies $< \omega_o$ are in the **passband**.

- More-attenuated frequencies $> \omega_o$ are in the **stopband**.

- [rc_lpf.ipynb](../notebooks/rc_lpf.ipynb)

### How is $\omega_o$ related to $R$ and $C$?

- $\omega_o$ is defined as the half-power point of the transfer function magnitude:

$$
\begin{gather}
|\bar{H}(j\omega_o)| = \frac{1}{\sqrt{2}} = \frac{1}{\sqrt{1 + (\omega_o RC)^2}} \\
\omega_o = \frac{1}{RC}
\end{gather}
$$

::: callout-important
We can "tune" the frequency response of the filter by changing the values of $R$ and $C$!
:::

- At $\omega_o$,  $\angle \bar{H}(j\omega_o) = -\tan^{-1}(1) = -45^\circ$ = -\frac{\pi}{4}.